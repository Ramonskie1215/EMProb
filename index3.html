<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Square Clock</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0E3CBD 0%, #1C1C1C 50%, #0E3CBD 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            overflow: hidden;
        }
        .clock-container {
            width: 100vmin;
            height: 100vmin;
            max-width: 100vh;
            max-height: 100vw;
            background: #1C1C1C;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            box-shadow: inset 0 0 0 2px rgba(37,159,222,0.2), 0 0 50px rgba(0,0,0,0.8);
        }

        /* BATTERY INDICATOR – TOP RIGHT */
        .battery-indicator {
            position: absolute;
            top: 8vmin;
            right: 8vmin;
            display: flex;
            align-items: center;
            gap: 2vmin;
            font-size: 4.5vmin;
            font-weight: 600;
            color: #259FDE;
            text-shadow: 0 0 2vmin rgba(37,159,222,0.6);
            z-index: 30;
            backdrop-filter: blur(6px);
            padding: 1.5vmin 3vmin;
            border-radius: 3vmin;
            background: rgba(37,159,222,0.15);
            border: 1px solid rgba(37,159,222,0.3);
        }
        .battery-icon {
            width: 8vmin;
            height: 4vmin;
            border: 0.8vmin solid #259FDE;
            border-radius: 1vmin;
            position: relative;
            box-shadow: 0 0 2vmin rgba(37,159,222,0.5);
        }
        .battery-icon::after {
            content: '';
            position: absolute;
            right: -1.5vmin;
            top: 50%;
            transform: translateY(-50%);
            width: 1.2vmin;
            height: 2.2vmin;
            background: #259FDE;
            border-radius: 0 0.6vmin 0.6vmin 0;
        }
        .battery-level {
            height: 100%;
            width: var(--battery-percent, 100%);
            background: linear-gradient(90deg, #0E3CBD, #259FDE);
            border-radius: 0.6vmin;
            transition: width 0.8s ease, background 0.8s ease;
        }
        .battery-text {
            font-family: 'Courier New', monospace;
            min-width: 11vmin;
            text-align: center;
        }
        .battery-low {
            color: #ff3366 !important;
            animation: pulse-red 2s infinite;
            text-shadow: 0 0 2vmin #ff3366 !important;
        }
        @keyframes pulse-red { 0%,100%{opacity:1} 50%{opacity:0.6} }

        /* ORIGINAL STYLES */
        .main-time { position:relative; z-index:10; text-align:center; width:100%; }
        .time-digits { font-size:20vmin; font-weight:900; font-family:'Courier New',monospace; letter-spacing:1vmin; color:#FFF; text-shadow:0 0 3vmin rgba(37,159,222,0.7),0 0 6vmin rgba(14,60,189,0.5); line-height:1; margin-bottom:1vmin; }
        .time-colon { color:#259FDE; animation:blink 1.5s infinite; text-shadow:0 0 2vmin rgba(37,159,222,0.8); }
        .date-display { font-size:4vmin; color:#848484; letter-spacing:0.5vmin; text-transform:uppercase; margin-top:3vmin; font-weight:500; }
        .seconds-ring { position:absolute; width:80vmin; height:80vmin; border-radius:50%; background:conic-gradient(from 0deg,#259FDE 0%,#0E3CBD 50%,transparent 50%,transparent 100%); mask:radial-gradient(circle,transparent 60%,black 61%); -webkit-mask:radial-gradient(circle,transparent 60%,black 61%); animation:rotate 60s linear infinite; opacity:0.4; }
        .digital-seconds { position:absolute; bottom:15vmin; font-size:8vmin; font-weight:700; color:#259FDE; font-family:'Courier New',monospace; text-shadow:0 0 2vmin rgba(37,159,222,0.6); }
        .period-indicator { position:absolute; top:15vmin; font-size:5vmin; font-weight:600; color:#FFF; background:rgba(37,159,222,0.2); padding:1.5vmin 4vmin; border-radius:2vmin; border:1px solid rgba(37,159,222,0.4); backdrop-filter:blur(5px); }
        .corner { position:absolute; width:10vmin; height:10vmin; border:1.5vmin solid #259FDE; opacity:0.6; }
        .corner-tl { top:5vmin; left:5vmin; border-right:none; border-bottom:none; }
        .corner-tr { top:5vmin; right:5vmin; border-left:none; border-bottom:none; }
        .corner-bl { bottom:5vmin; left:5vmin; border-right:none; border-top:none; }
        .corner-br { bottom:5vmin; right:5vmin; border-left:none; border-top:none; }
        .center-dot { position:absolute; width:3vmin; height:3vmin; background:#259FDE; border-radius:50%; box-shadow:0 0 2vmin rgba(37,159,222,0.8); z-index:20; }
        .floating-element { position:absolute; width:3vmin; height:3vmin; background:rgba(37,159,222,0.3); border-radius:50%; animation:float 10s infinite ease-in-out; }
        .floating-element:nth-child(2){width:2vmin;height:2vmin;background:rgba(255,255,255,0.2);animation-delay:-2s;top:30%;left:20%}
        .floating-element:nth-child(3){width:4vmin;height:4vmin;background:rgba(14,60,189,0.4);animation-delay:-5s;bottom:30%;right:25%}
        .hour-marker { position:absolute; width:0.8vmin; height:3vmin; background:#5E5E5E; transform-origin:bottom center; border-radius:0.4vmin; }

        @keyframes blink {0%,100%{opacity:1}50%{opacity:0.3}}
        @keyframes rotate {from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        @keyframes float {0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(2vmin,-2vmin) scale(1.1)}66%{transform:translate(-1vmin,1vmin) scale(0.9)}}
        @keyframes pulse {0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:0.8}}

        @media (max-height:500px) and (max-width:500px){
            .time-digits{font-size:18vmin;letter-spacing:0.8vmin}
            .digital-seconds{font-size:6vmin;bottom:12vmin}
            .period-indicator{font-size:4vmin;top:12vmin}
            .battery-indicator{top:6vmin;right:6vmin;font-size:4vmin;padding:1vmin 2vmin}
            .battery-icon{width:7vmin;height:3.5vmin}
        }
    </style>
</head>
<body>
    <div class="clock-container">
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>

        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>

        <div class="seconds-ring" id="secondsRing"></div>
        <div class="center-dot"></div>
        <div class="period-indicator" id="period">AM</div>

        <!-- BATTERY TOP-RIGHT -->
        <div class="battery-indicator" id="batteryIndicator">
            <div class="battery-icon">
                <div class="battery-level" id="batteryLevel"></div>
            </div>
            <div class="battery-text" id="batteryText">100%</div>
        </div>

        <div class="main-time">
            <div class="time-digits">
                <span id="hours">12</span><span class="time-colon">:</span><span id="minutes">00</span>
            </div>
            <div class="date-display" id="date">MONDAY, JANUARY 1</div>
        </div>

        <div class="digital-seconds" id="seconds">00</div>
    </div>

    <script>
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const periodEl = document.getElementById('period');
        const dateEl = document.getElementById('date');
        const secondsRing = document.getElementById('secondsRing');
        const batteryLevel = document.getElementById('batteryLevel');
        const batteryText = document.getElementById('batteryText');
        const batteryIndicator = document.getElementById('batteryIndicator');

        // 12-hour markers
        function createHourMarkers() {
            const container = document.querySelector('.clock-container');
            for (let i = 0; i < 12; i++) {
                const marker = document.createElement('div');
                marker.className = 'hour-marker';
                const angle = i * 30 * Math.PI / 180;
                const x = 50 + 35 * Math.sin(angle);
                const y = 50 - 35 * Math.cos(angle);
                marker.style.left = `${x}vmin`;
                marker.style.top = `${y}vmin`;
                marker.style.transform = `rotate(${i*30}deg)`;
                container.appendChild(marker);
            }
        }

        // Battery (with fallback)
        function updateBattery() {
            if ('getBattery' in navigator) {
                navigator.getBattery().then(bat => {
                    function refresh() {
                        const lvl = Math.floor(bat.level * 100);
                        batteryLevel.style.setProperty('--battery-percent', lvl + '%');
                        batteryText.textContent = bat.charging ? lvl + '% Charging' : lvl + '%';

                        if (lvl <= 20) {
                            batteryIndicator.classList.add('battery-low');
                            batteryLevel.style.background = 'linear-gradient(90deg,#ff3366,#ff6666)';
                        } else {
                            batteryIndicator.classList.remove('battery-low');
                            batteryLevel.style.background = 'linear-gradient(90deg,#0E3CBD,#259FDE)';
                        }
                    }
                    refresh();
                    bat.addEventListener('levelchange', refresh);
                    bat.addEventListener('chargingchange', refresh);
                });
            } else {
                batteryText.textContent = '100%';
            }
        }

        // Clock
        function updateClock() {
            const now = new Date();
            let h = now.getHours();
            const m = now.getMinutes();
            const s = now.getSeconds();
            const ms = now.getMilliseconds();

            periodEl.textContent = h >= 12 ? 'PM' : 'AM';
            h = h % 12 || 12;

            hoursEl.textContent = h.toString().padStart(2,'0');
            minutesEl.textContent = m.toString().padStart(2,'0');
            secondsEl.textContent = s.toString().padStart(2,'0');

            const deg = (s + ms/1000) * 6;
            secondsRing.style.background = `conic-gradient(from ${deg}deg, #259FDE 0%, #0E3CBD 50%, transparent 50%, transparent 100%)`;

            const options = { weekday:'long', month:'long', day:'numeric' };
            dateEl.textContent = now.toLocaleDateString('en-US', options).toUpperCase();

            if (s === 0) {
                document.querySelector('.main-time').style.animation = 'pulse 0.5s ease';
                setTimeout(() => document.querySelector('.main-time').style.animation = '', 500);
            }

            const intensity = Math.sin(s * 0.1) * 0.3 + 0.7;
            secondsEl.style.color = `rgba(37,159,222,${intensity})`;
            secondsEl.style.textShadow = `0 0 ${intensity3}vmin rgba(37,159,222,0.6)`;
        }

        createHourMarkers();
        updateClock();
        updateBattery();
        setInterval(updateClock, 50);

        // FULLSCREEN ON CLICK REMOVED – no more auto-fullscreen!
        // (If you ever want it back, just uncomment the block below)
        /*
        document.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(()=>{});
            } else {
                document.exitFullscreen();
            }
        });
        */

        // Keep perfect square on resize
        window.addEventListener('resize', () => {
            const size = Math.min(window.innerWidth, window.innerHeight) * 0.95;
            document.querySelector('.clock-container').style.width = size + 'px';
            document.querySelector('.clock-container').style.height = size + 'px';
        });
        window.dispatchEvent(new Event('resize'));
    </script>
</body>
</html>
