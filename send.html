<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mailjet Test – One Click Send</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 30px; }
    pre { background:#f4f4f4; padding:15px; border-radius:8px; }
  </style>
</head>
<body>
  <h1>Mailjet “Your email flight plan!”</h1>
  <p>Click the button → the exact same email as your cURL will be sent immediately.</p>
  
  <button onclick="send()" style="font-size:18px;padding:12px 24px;">
    Send Email Now
  </button>
  
  <h3>Result:</h3>
  <pre id="out">Waiting...</pre>

  <script>
  async function send() {
    const publicKey  = "d73a62a14f56b6a98208d2c1695d9a11";
    const privateKey = "ba143bbda64176717971c2cba75ec100";

    const auth = btoa(publicKey + ":" + privateKey);

    const payload = {
      "FromEmail": "pilot@mailjet.com",
      "FromName": "Mailjet Pilot",
      "Subject": "Your email flight plan!",
      "Text-part": "Dear passenger, welcome to Mailjet! May the delivery force be with you!",
      "Html-part": "<h3>Dear passenger, welcome to <a href=\"https://www.mailjet.com/\">Mailjet</a>!<br>May the delivery force be with you!</h3>",
      "Recipients: [{ "Email": "passenger@mailjet.com" }]
    };

    try {
      const res = await fetch("https://api.mailjet.com/v3/send", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Basic " + auth
        },
        body: JSON.stringify(payload)
      });

      const data = await res.json();

      if (res.ok) {
        document.getElementById("out").textContent = 
          "SUCCESS! Email sent.\n\n" + JSON.stringify(data, null, 2);
      } else {
        document.getElementById("out").textContent = 
          "ERROR " + res.status + "\n\n" + JSON.stringify(data, null, 2);
      }
    } catch (e) {
      document.getElementById("out").textContent = "Network error: " + e;
    }
  }
  </script>
</body>
</html>
